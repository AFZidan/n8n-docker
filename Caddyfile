# Global options - Disable automatic HTTPS redirects
{
    # Use production CA for new domain
    acme_ca https://acme-v02.api.letsencrypt.org/directory
    email admin@hizidan.com  # Replace with your email
    
    # Disable automatic HTTPS redirects
    auto_https off
}

# n8n workflow automation - HTTP only to avoid redirect loops
http://n8n.hizidan.com, https://n8n.hizidan.com {
    reverse_proxy n8n:5678 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
    }
    
    # Enable compression
    encode gzip
}

# MongoDB external access via subdomain - HTTP/HTTPS both supported
http://mongodb.hizidan.com, https://mongodb.hizidan.com {
    reverse_proxy mongodb:27017
}

# MongoDB Web UI (mongo-express) - HTTP/HTTPS both supported
http://mongoui.hizidan.com, https://mongoui.hizidan.com {
    reverse_proxy mongo-express:8081
}
